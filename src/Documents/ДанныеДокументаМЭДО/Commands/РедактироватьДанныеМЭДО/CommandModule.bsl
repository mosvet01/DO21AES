
#Область ОбработчикиСобытий

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	ДанныеМЭДОСсылка = ПолучитьСсылкуНаДанныеДокумента(ПараметрКоманды);
	Если ЗначениеЗаполнено(ДанныеМЭДОСсылка) Тогда
		ПоказатьЗначение( , ДанныеМЭДОСсылка);
	Иначе
		ПараметрыФормы = Новый Структура();
		ПараметрыФормы.Вставить("ОткрытиеИзФормы", Истина);
		ПараметрыФормы.Вставить("Документ", ПараметрКоманды);
		ОткрытьФорму(
			"Документ.ДанныеДокументаМЭДО.Форма.ФормаДокумента",
			ПараметрыФормы,
			ПараметрыВыполненияКоманды.Источник,
			ПараметрыВыполненияКоманды.Уникальность,
			ПараметрыВыполненияКоманды.Окно,
			ПараметрыВыполненияКоманды.НавигационнаяСсылка);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

// Получить ссылку на документ "Данные документа МЭДО".
// 
// Параметры:
//  Документ - ОпределяемыйТип.ПредметМЭДО
// 
// Возвращаемое значение:
//  ДокументСсылка.ДанныеДокументаМЭДО
&НаСервере
Функция ПолучитьСсылкуНаДанныеДокумента(Документ)
	
	Поля = Документы.ДанныеДокументаМЭДО.ПолучитьДанныеДокументаМЭДО(
		Документ, "Ссылка", МЭДОСтруктурыДанных.НовыйЛегкийОтвет());
	Возврат Поля.Ссылка;
	
КонецФункции

#КонецОбласти
